{% extends "turin/base.html" %}

{% block js %}
	<script src="https://www.google.com/jsapi" type="text/javascript"></script>
		
		<script language="Javascript" type="text/javascript">
		//<!
		google.load('search', '1');
		
		function OnLoad() {
			// Create a search control
			var searchControl = new google.search.SearchControl();
			
			searchControl.addSearcher(new google.search.WebSearch());
			
			// tell the searcher to draw itself and tell it where to attach
			searchControl.draw(document.getElementById("searchcontrol"));
		
			// execute an inital search
			searchControl.execute("'This is a QuickRead' site:www.registerguard.com");
		}
		google.setOnLoadCallback(OnLoad);

		//]]>
		</script>
{% endblock %}

{% block css %}
	<style>
		form.gsc-search-box {
			display: none;
		}
	
		.gsc-control {
			width: 100%;
		}
		
		.gsc-cursor-box {
			margin-top: 8px;
			margin-bottom: 6px !important;
		}
	</style>
{% endblock %}

{% block content %}
	<div class="container">
		<h1>Current date: {{ today_status }}</h1>
		<h5>(Possibly cached date: {{ today }})</h5>
		
		<h3>Dynamic index of stories on registerguard.com with <b>This is a QuickRead ... </b> artifacts</h3>
		
		<div id="searchcontrol">Loading ... </div>
		
		<hr style="margin-top: 0">
		
		<table class="table table-condensed table-responsive">
		{% for result in results %}
			{% ifchanged %}
			<tr class="active">
				<th>DTI story file:</th><th>{{ result.story_slug }}</th>
			</tr>
			{% endifchanged %}
			<tr>
				<td rowspan="3"><img src="http://registerguard.com/csp/cms/sites/custom.rg.img.cls?id={{ result.cms_picture_id }}"></td>
				<td><b>DTI image file:</b> {{ result.image_slug }}</td>
			</tr>
			<tr>
				<td><b>Caption:</b> {{ result.caption }}</td>
			</tr>
			<tr{% if result.image_priority_id = '-' %} class="warning"{% endif %}>
				<td><b>Image Priority:</b> {{ result.image_priority_id }}</td>
			</tr>
		{% endfor %}
		</table>
		
		<hr>
		
		<strong>Raw result</strong>: {{ results }}<br>
		<strong>Story ID list</strong>: {{ story_id_list }}<br>
		<strong>DT_MEDIA_STATUS Settings</strong>: {{ settings }}<br>
		<strong>early_results</strong>: {{ early_results }}<br>
		
	</div> <!-- /.container -->
{% endblock content %}